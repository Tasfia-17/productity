{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Switch Vite base path per environment to prevent Vercel blank-load",
  "requirements": [
    {
      "id": "REQ-56",
      "summary": "Make Vite base path environment-aware so Vercel builds use \"/\" while static/subdirectory builds continue using \"./\" to keep all built assets resolving correctly.",
      "acceptanceCriteria": [
        "When built and deployed on Vercel, the app loads (no blank screen) and core UI renders (top nav, background textures, and at least one section visible).",
        "On Vercel, browser devtools show no 404s for built JS/CSS chunks due to an incorrect base path.",
        "When built for a downloadable/static-host subdirectory scenario, assets referenced via import.meta.env.BASE_URL (through publicAssetUrl(...)) still resolve correctly when served from a non-root path.",
        "No changes are required to backend code to achieve this."
      ],
      "file_operations": [
        {
          "path": "frontend/vite.config.ts",
          "operation": "modify",
          "description": "Update Vite config to compute `base` per build environment: detect Vercel builds (e.g., via `process.env.VERCEL`) and set base to \"/\" for those builds; otherwise keep the current relative base \"./\" for downloadable/static subdirectory deployments. Ensure the base selection is applied consistently for build output so JS/CSS/assets resolve correctly in both modes."
        }
      ]
    }
  ]
}
