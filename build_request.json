{
  "kind": "build_request",
  "title": "Fix Vercel blank-load by switching Vite base path per environment",
  "projectName": "Temple of Productivi-Tea",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-56",
      "text": "Update the Vite configuration so Vercel deployments build with a root base path (\"/\") while downloadable/static subdirectory deployments continue to build with a relative base path (\"./\"), ensuring the deployed app does not render a blank page and all JS/CSS/assets resolve correctly in both modes.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "fix vercel build"
        ]
      },
      "acceptanceCriteria": [
        "When built and deployed on Vercel, the app loads (no blank screen) and core UI renders (top nav, background textures, and at least one section visible).",
        "On Vercel, browser devtools show no 404s for built JS/CSS chunks due to an incorrect base path.",
        "When built for a downloadable/static-host subdirectory scenario, assets referenced via import.meta.env.BASE_URL (through publicAssetUrl(...)) still resolve correctly when served from a non-root path.",
        "No changes are required to backend code to achieve this."
      ]
    }
  ],
  "constraints": [
    "Frontend immutable paths must not be edited: frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useInternetIdentity.tsx, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, frontend/src/components/ui.",
    "Do not introduce multi-page routing; keep the app as a single-page experience."
  ],
  "nonGoals": [
    "Adding new UI/sections/features unrelated to deployment/base-path handling.",
    "Introducing any backend changes or persistence to solve the Vercel issue."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}
